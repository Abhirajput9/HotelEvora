/*! 2021-10-21 */
var _bgo={bg:{}};window.bgo?_bgo=window.bgo:window.bgo=_bgo;var ajaxRequest={jsonP:function(){this._done=!1,this._requestData=null,this.handleLoad=function(a){if(!a._done){a._done=!0;var b=_bgo.bg.response;1==b.status?a._requestData.ok(b):a._requestData.error(b),a._requestData=null}},this.request=function(a,b){function c(){d._done||"complete"!==e.readyState||d.handleLoad(d)}var d=this;d._done=!1,d._requestData=b;var e=document.createElement("script");document.body.appendChild(e),e.onreadystatechange=c,e.onload=function(){d.handleLoad(d)},e.src=a,b.done||(b.done=function(a){console.info(a)})}}},_roomTypesGadget={init:function(){for(var a={},b=document.querySelectorAll("[data-offerid]"),c=0;c<b.length;c++){var d=b[c],e=d.dataset.offerid;a[e]=d}this.checkBestRateAdvanceBooking(a)},checkBestRateAdvanceBooking:function(a){var b=Object.keys(a).map(function(a){return a.split(".")[0]});b=JSON.stringify(b);var c=securePath+"/logic/requestHandler.v04.php?action=bestOffersRates&sess_id="+sessId+"&apikey="+apiKey+"&hotelId="+hotelId+"&offers="+b,d=new ajaxRequest.jsonP;d.request(c,{ok:function(b){var c=b.js.bars;for(var d in a){var e,f=a[d],g=f.getElementsByClassName("minRateValue")[0],h=f.getElementsByClassName("bgLink");for(var i in h)if(h[i]&&-1!==h[i].rel.indexOf("bglinkBAR")){e=h[i];break}c[d]?(e.rel=e.rel.replace("[0","["+c[d].day),c[d].rateCode&&(e.rel=e.rel.replace(",]",","+c[d].rateCode+"]"),e.addEventListener("click",function(){var a=this.rel,b=a.match(/^bglinkBAR.*?\[(.*?)\]/i)[1],c=b.split(",");window.location.href=bginit.vars.purl+"?apikey="+bginit.vars.apikey+"&startDay="+c[0]+"&nrNights="+c[1]+"&preselect="+c[2]+(bginit.vars.linkerParam?"&"+bginit.vars.linkerParam:"")})),g.innerHTML=_roomTypesGadget.formatCurrency(c[d].rate),g.parentNode.style.display="block",f.dataset.price=c[d].rate,f.dataset.checkin=c[d].day):e&&e.parentNode&&e.parentNode.removeChild(e)}},error:function(a){console.info("error:"),console.info(a)}})},formatCurrency:function(a){if("number"!=typeof a&&(a=a.replace(",","."),a=parseFloat(a)),null!=a&&void 0!=a){var b=a.toFixed(2).toString(),c=currencyPlaceHolder;return-1!==currencyPlaceHolder.indexOf(",")?(b=b.replace(".",","),c.replace("0,00",b)):c.replace("0.00",b)}}};_roomTypesGadget.init();